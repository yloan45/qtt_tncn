<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
  <%- include('./partials/head') %>
</head>

<body>
  <div class="preloader">
    <div class="lds-ripple">
      <div class="lds-pos"></div>
      <div class="lds-pos"></div>
    </div>
  </div>
  <div id="main-wrapper" data-layout="vertical">
    <header class="topbar" data-navbarbg="skin5">
      <%- include('./partials/header') %>
    </header>
    <aside class="left-sidebar" data-sidebarbg="skin5">
      <div class="scroll-sidebar">
        <%-include('./partials/sidebar') %>
      </div>
    </aside>
    <div class="page-wrapper" style="background-color: white;">
      <div class="page-breadcrumb">
        <div class="row">
          <div class="col-12 d-flex no-block align-items-center">
            <h4 class="page-title">Danh sách tổng hợp thông tin người được trả thuế</h4>
            <div class="ms-auto text-end">
              <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                  <li class="breadcrumb-item"><a href="#">Home</a></li>
                  <li class="breadcrumb-item active" aria-current="page">
                    Library
                  </li>
                </ol>
              </nav>
            </div>
          </div>
        </div>
      </div>

      <div class="container-fluid">
        <table class="table table-bordered  table-striped "  id="data-table">
          <tr style="text-align: center; font-weight: bolder; ">
            <th style="text-align: center; font-weight: bolder; "> STT </th>
            <th style="text-align: center; font-weight: bolder; ">Họ và tên NNT</th>
            <th style="text-align: center; font-weight: bolder; ">Mã số thuế</th>
            <th style="text-align: center; font-weight: bolder; ">Địa chỉ</th>
            <th style="text-align: center; font-weight: bolder; ">Email</th>
            <th style="text-align: center; font-weight: bolder; ">Năm kê khai</th>
            <th style="text-align: center; font-weight: bolder; ">Tờ khai</th>
            <th style="text-align: center; font-weight: bolder; ">Trạng thái tờ khai</th>
            <th style="text-align: center; font-weight: bolder; ">Action</th>
          </tr>
          <% let totalIndex=0; %>
          <% tokhai.forEach((tokhaithue, index)=> { %>
            <tr style="text-align: center;">
                <td> <%= index+1 %></td>
                <td><%= tokhaithue.fullname %></td>
                <td><%= tokhaithue.ca_nhan.masothue %></td>
                <td><%= tokhaithue.address %></td>
                <td><%= tokhaithue.email %></td>
                <td><%= tokhaithue.tuthang %> - <%= tokhaithue.denthang %></td>
                <td><%= tokhaithue.loai_to_khai.tenloai %></td>
                <td><%= tokhaithue.trang_thai_xu_li.tentrangthai%></td>
                <td>
                    <i class="fa-solid fa-eye"></i>
                    <i class="fa-solid fa-pen"></i>
                    <i class="fa-solid fa-envelope"></i>
                </td>
            </tr>
            <% totalIndex++; %>
              <% }) %>
                <h5>Tổng cộng: <%= totalIndex %>
                </h5>
         
        </table>

      </div>
<script>
  // Lấy tham chiếu đến trường tìm kiếm và bảng
  const searchInput = document.getElementById('search-input');
  const dataTable = document.getElementById('data-table');

  // Gán sự kiện input cho trường tìm kiếm
  searchInput.addEventListener('input', function() {
    const searchTerm = searchInput.value.toLowerCase();
    const rows = dataTable.querySelectorAll('tbody tr');

    rows.forEach(row => {
      const columns = row.querySelectorAll('td');
      let found = false;

      columns.forEach(column => {
        if (column.textContent.toLowerCase().includes(searchTerm)) {
          found = true;
        }
      });

      if (found) {
        row.style.display = '';
      } else {
        row.style.display = 'none';
      }
    });
  });
</script>


</html>