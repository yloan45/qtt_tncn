<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
  <%- include('./partials/head') %>
</head>

<body>
  <div class="preloader">
    <div class="lds-ripple">
      <div class="lds-pos"></div>
      <div class="lds-pos"></div>
    </div>
  </div>
  <div id="main-wrapper" data-layout="vertical">
    <header class="topbar" data-navbarbg="skin5">
      <%- include('./partials/header') %>
    </header>
    <aside class="left-sidebar" data-sidebarbg="skin5">
      <div class="scroll-sidebar">
        <%-include('./partials/sidebar') %>
      </div>
    </aside>
    <div class="page-wrapper" style="background-color: white;">
      <div class="page-breadcrumb">
        <div class="row">
          <div class="col-12 d-flex no-block align-items-center">
            <h4 class="page-title">Danh sách tổng hợp thông tin người được trả thuế</h4>          
          </div>
        </div>
      </div>

      <div class="container-fluid">
        <table class="table table-bordered  table-striped "  >
          <tr style="text-align: center; background-color: #2886d3; color: white;"  >
            <th style="text-align: center; font-weight: bolder; "> STT </th>
            <th style="text-align: center; font-weight: bolder; " >Đơn vị kê khai</th>
            <th style="text-align: center; font-weight: bolder; ">Tên NLĐ</th>
            <th style="text-align: center; font-weight: bolder; ">Mã số thuế</th>
            <th style="text-align: center; font-weight: bolder; ">Địa chỉ</th>
            <th style="text-align: center; font-weight: bolder; ">Điện thoại</th>
            <th style="text-align: center; font-weight: bolder; ">Email</th>
            <th style="text-align: center; font-weight: bolder; " >Lương</th>
          </tr>
          <% let totalIndex=0; %>
            <% data.forEach((user, index)=> { %>
              <tr style="text-align: center;">
                <td>
                  <%= index+1 %>
                </td>
                <td>
                  <%= user.to_chuc.tentochuc %>
                </td>
                <td>
                  <%= user.hoten %>
                </td>
                <td>
                  <%= user.masothue %>
                </td>
                <td>
                  <%= user.diachi %>
                </td>
                <td>
                  <%= user.dienthoai %>
                </td>
                <td>
                  <%= user.email %>
                </td>
                <td><%= user.thunhaptinhthue %></td>
                <td style="display: none;">
                  <%= user.toChucId %>
                </td>
              </tr>
              <% totalIndex++; %>
                <% }) %>
                  <h5>Tổng cộng: <%= totalIndex %>
                  </h5>
                  <!-- Nút phân trang -->

        </table>

      </div>
</body>
<script>
  // Lấy tham chiếu đến trường tìm kiếm và bảng
  const searchInput = document.getElementById('search-input');
  const dataTable = document.getElementById('data-table');

  // Gán sự kiện input cho trường tìm kiếm
  searchInput.addEventListener('input', function() {
    const searchTerm = searchInput.value.toLowerCase();
    const rows = dataTable.querySelectorAll('tbody tr');

    rows.forEach(row => {
      const columns = row.querySelectorAll('td');
      let found = false;

      columns.forEach(column => {
        if (column.textContent.toLowerCase().includes(searchTerm)) {
          found = true;
        }
      });

      if (found) {
        row.style.display = '';
      } else {
        row.style.display = 'none';
      }
    });
  });
</script>


</html>